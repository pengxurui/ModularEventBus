![](https://github.com/pengxurui/AndroidFamily/blob/master/images/Android_Banner.png)

<p align='center'>
  <a href="https://www.github.com/pengxurui" target="_blank">
    <img src="https://komarev.com/ghpvc/?username=pengxurui&style=flat&label=ğŸ‘%20Views">
  </a>
  <a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank">
    <img src="https://img.shields.io/badge/license-Apache--2.0-informational.svg?style=flat">
  </a>
  <a href="https://android-arsenal.com/result?level=14" target="_blank">
    <img src="https://img.shields.io/badge/API-14+-brightgreen.svg?style=flat">
  </a>
</p>

<p align='center'>
  <a href="https://www.github.com/pengxurui" target="_blank">
    <img src="https://img.shields.io/badge/ä½œè€…-@å°å½­-brightgreen.svg?style=flat&logo=GitHub">
  </a>
  <a href="https://github.com/pengxurui/Android-NoteBook/raw/master/images/æœä¸€æœå…¬ä¼—å·.png" target="_blank">
    <img src="https://img.shields.io/badge/å…¬ä¼—å·-å½­æ—­é”-brightgreen.svg?style=flat&logo=WeChat">
  </a>
  <a href="https://juejin.cn/user/1063982987230392" target="_blank">
    <img src="https://img.shields.io/badge/ğŸ”¥%20juejin-æ˜é‡‘-blue.svg?style=flat">
  </a>
  <a href="https://www.zhihu.com/people/pengxurui" target="_blank">
    <img src="https://img.shields.io/badge/zhihu-çŸ¥ä¹-informational.svg?style=flat&logo=Zhihu">
  </a>
  <a href="https://www.toutiao.com/c/user/token/MS4wLjABAAAAbY-k9r66YVymjlqMaaGZJO67hCNYaNGa7PCoisQYmR4" target="_blank">
    <img src="https://img.shields.io/badge/toutiao-å¤´æ¡-red.svg?style=flat">
  </a>
  <a href="https://www.cnblogs.com/pengxurui/" target="_blank">
    <img src="https://img.shields.io/badge/cnblogs-åšå®¢å›­-green.svg?style=flat">
  </a>
  <a href="https://blog.csdn.net/pengxurui?spm=1000.2115.3001.5343" target="_blank">
    <img src="https://img.shields.io/badge/csdn-CSDN-9cf.svg?style=flat">
  </a>
  <a href="" target="_blank">
    <img src="https://img.shields.io/badge/jianshu-ç®€ä¹¦-orange.svg?style=flat">
  </a>
</p>

## ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ ModularEventBusï¼Ÿ

å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°å½­ã€‚ModularEventBus æ˜¯ä¸€æ¬¾å¸®åŠ© Android App è§£å†³äº‹ä»¶æ€»çº¿æ»¥ç”¨é—®é¢˜çš„æ¡†æ¶ï¼Œäº¦å¯ä½œä¸ºç»„ä»¶åŒ–åŸºç¡€è®¾æ–½ã€‚ **å…¶è§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡æ³¨è§£å®šä¹‰äº‹ä»¶ï¼Œç”±ç¼–è¯‘æ—¶ APT æ³¨è§£å¤„ç†å™¨è¿›è¡Œåˆæ³•æ€§æ£€æŸ¥å’Œè‡ªåŠ¨ç”Ÿæˆäº‹ä»¶æ¥å£ï¼Œä»¥å®ç°å¯¹äº‹ä»¶å®šä¹‰ã€å‘å¸ƒå’Œè®¢é˜…çš„å¼ºçº¦æŸã€‚**

<p align='center'>
  <a target="_blank" witth="300">
    <img width = "400" src="https://github.com/pengxurui/ModularEventBus/blob/main/images/ModularEventBusImage.png">
  </a>
</p>

### æœ€æ–°ç‰ˆæœ¬

|æ¨¡å—|modular-eventbus-api|modular-eventbus-compiler|modular-eventbus-annotation|
|---|---|---|---|
|æœ€æ–°ç‰ˆæœ¬|[![Download](https://maven-badges.herokuapp.com/maven-central/io.github.pengxurui/modular-eventbus-api/badge.svg)](https://maven-badges.herokuapp.com/maven-central/io.github.pengxurui/modular-eventbus-api) | [![Download](https://maven-badges.herokuapp.com/maven-central/io.github.pengxurui/modular-eventbus-compiler/badge.svg)](https://maven-badges.herokuapp.com/maven-central/io.github.pengxurui/modular-eventbus-compiler) | [![Download](https://maven-badges.herokuapp.com/maven-central/io.github.pengxurui/modular-eventbus-annotation/badge.svg)](https://maven-badges.herokuapp.com/maven-central/io.github.pengxurui/modular-eventbus-annotation)

### Demo å±•ç¤º

##### [Demo apk](https://github.com/pengxurui/ModularEventBus/tree/main/demo)

### å¸¸è§äº‹ä»¶æ€»çº¿æ¡†æ¶å¯¹æ¯”

ä»¥ä¸‹ä»å¤šä¸ªç»´åº¦å¯¹æ¯”å¸¸è§çš„äº‹ä»¶æ€»çº¿æ¡†æ¶ï¼ˆ âœ… è‰¯å¥½æ”¯æŒã€â˜‘ æ”¯æŒã€âŒ ä¸æ”¯æŒï¼‰ï¼š

| äº‹ä»¶æ€»çº¿ | ModularEventBus | modular-event | SmartEventBus | LiveEventBus | LiveDataBus | EventBus | RxBus |
| --- | --- | --- | --- | --- | --- | --- | --- |
| å¼€å‘è€… | @å½­æ—­é” | @ç¾å›¢ | @JeremyLiao | @JeremyLiao | / | @greenrobot | / |
| Github Star | 0 | æœªå¼€æº | 146 | 3.4k | / | 24.1k | / |
| ç”Ÿæˆäº‹ä»¶æ–‡æ¡£ | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ |
| ç©ºæ•°æ®æ‹¦æˆª | âœ… | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ |
| æ— æ•°æ®äº‹ä»¶ | â˜‘ | âŒ | âŒ | âŒ | âŒ | âŒ | âŒ |
| æ³›å‹äº‹ä»¶ | âœ… | âŒ |  â˜‘ |  â˜‘ | âŒ | âŒ | âŒ |
| è‡ªåŠ¨æ¸…é™¤ç©ºé—²äº‹ä»¶ | âœ… | âŒ | âœ… | âœ… | âŒ | âŒ | âŒ |
| äº‹ä»¶å¼ºçº¦æŸ | âœ… | â˜‘ | â˜‘ | âŒ | âŒ | âŒ | âŒ |
| ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥ | âœ… | âœ… | âœ… | âœ… | âœ… | âŒ | âŒ |
| å»¶è¿Ÿå‘é€äº‹ä»¶ | âœ… | âœ… | âœ… | âœ… | âœ… | âŒ | âŒ |
| æœ‰åºæ¥æ”¶äº‹ä»¶ | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| è®¢é˜… Sticky äº‹ä»¶ | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… | âœ… |
| æ¸…é™¤ Sticky äº‹ä»¶ | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… | âœ… |
| ç§»é™¤äº‹ä»¶ | âœ… | âŒ | âŒ | âŒ | âŒ | âœ… | âœ… |
| çº¿ç¨‹è°ƒåº¦ | âŒ | âŒ | âŒ | âŒ | âŒ | âœ… | âœ… |
| è·¨è¿›ç¨‹ / è·¨ App | âŒï¼ˆå¯æ”¯æŒï¼‰ | âŒ | âœ… | âœ… | âŒ | âŒ | âŒ |
| å…³é”®åŸç†| APT+é™æ€ä»£ç† | APT+åŠ¨æ€ä»£ç†| APT+é™æ€ä»£ç† | LiveData | LiveData | APT | RxJava|

### ModularEventBus ç‰¹æ€§ä¸€è§ˆ

**1ã€äº‹ä»¶å¼ºçº¦æŸ**

âœ…  æ”¯æŒé›¶é…ç½®å¿«é€Ÿä½¿ç”¨ï¼›

âœ…  æ”¯æŒ APT æ³¨è§£å¤„ç†å™¨è‡ªåŠ¨ç”Ÿæˆäº‹ä»¶æ¥å£ç±»ï¼›

âœ…  æ”¯æŒç¼–è¯‘æ—¶åˆæ³•æ€§æ ¡éªŒå’Œè­¦å‘Šæç¤ºï¼›

âœ…  æ”¯æŒç”Ÿæˆäº‹ä»¶æ–‡æ¡£ï¼›

âœ…  æ”¯æŒå¢é‡ç¼–è¯‘ï¼›

**2ã€Lifecycle ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥**

âœ…  å†…ç½®åŸºäº `LiveData` çš„ LiveDataBusï¼›

âœ…  æ”¯æŒè‡ªåŠ¨å–æ¶ˆè®¢é˜…ï¼Œé¿å…å†…å­˜æ³„æ¼ï¼›

âœ…  æ”¯æŒå®‰å…¨åœ°å‘é€äº‹ä»¶ä¸æ¥æ”¶äº‹ä»¶ï¼Œé¿å…äº§ç”Ÿç©ºæŒ‡é’ˆå¼‚å¸¸æˆ–ä¸å¿…è¦çš„æ€§èƒ½æŸè€—ï¼›

âœ…  æ”¯æŒæ°¸ä¹…è®¢é˜…äº‹ä»¶ï¼›

âœ…  æ”¯æŒè‡ªåŠ¨æ¸…é™¤æ²¡æœ‰å…³è”è®¢é˜…è€…çš„ç©ºé—² `LiveData` ä»¥é‡Šæ”¾å†…å­˜ï¼›

**3ã€æ›´å¤šç‰¹æ€§æ”¯æŒ**

âœ…  æ”¯æŒ Java / Kotlinï¼›

âœ…  æ”¯æŒ AndroidXï¼›

âœ…  æ”¯æŒè®¢é˜… Sticky ç²˜æ€§äº‹ä»¶ï¼Œæ”¯æŒç§»é™¤äº‹ä»¶ï¼›

âœ…  æ”¯æŒ Generic æ³›å‹äº‹ä»¶ï¼Œå¦‚ `List<String>` äº‹ä»¶ï¼›

âœ…  æ”¯æŒæ‹¦æˆªç©ºæ•°æ®ï¼›

âœ…  æ”¯æŒåªå‘å¸ƒäº‹ä»¶ä¸æºå¸¦æ•°æ®çš„æ— æ•°æ®äº‹ä»¶ï¼›

âœ…  æ”¯æŒå»¶è¿Ÿå‘é€äº‹ä»¶ï¼›

âœ…  æ”¯æŒæœ‰åºæ¥æ”¶äº‹ä»¶ã€‚

## ModularEventBus å¿«é€Ÿä½¿ç”¨

- **1ã€æ·»åŠ ä¾èµ–**

`æ¨¡å—çº§ build.gradle`

``` gradle
plugins {
    id 'com.android.application' // æˆ– id 'com.android.library'
    id 'org.jetbrains.kotlin.android'
    id 'kotlin-kapt'
}
dependencies {
    // æ›¿æ¢æˆæœ€æ–°ç‰ˆæœ¬
    implementation 'io.github.pengxurui:modular-eventbus-api:x.x.x'
    kapt 'io.github.pengxurui:modular-eventbus-compiler:x.x.x'
    ...
}
```

- **2ã€å®šä¹‰äº‹ä»¶æ•°æ®ç±»å‹ï¼ˆå¯é€‰ï¼‰ï¼š** å®šä¹‰äº‹ä»¶å…³è”çš„æ•°æ®ç±»å‹ï¼Œå¯¹äºåªå‘å¸ƒäº‹ä»¶è€Œä¸éœ€è¦æºå¸¦æ•°æ®çš„åœºæ™¯ï¼Œå¯ä»¥ä¸å®šä¹‰äº‹ä»¶ç±»å‹ã€‚

`UserInfo.kt`

```kotlin
data class UserInfo(val userName: String)
```

- **3ã€å®šä¹‰äº‹ä»¶ï¼š** ä½¿ç”¨æ¥å£å®šä¹‰äº‹ä»¶åå’Œäº‹ä»¶æ•°æ®ç±»å‹ï¼Œå¹¶ä½¿ç”¨ `@EventGroup` æ³¨è§£ä¿®é¥°è¯¥æ¥å£ï¼š

`LoginEvents.kt`

```kotlin
@EventGroup
interface LoginEvents {

  // äº‹ä»¶åï¼šlogin
  // äº‹ä»¶æ•°æ®ç±»å‹ï¼šUserInfo
  fun login(): UserInfo

  // äº‹ä»¶åï¼šlogout
  fun logout()
}
```

- **4ã€æ‰§è¡Œæ³¨è§£å¤„ç†å™¨ï¼š** æ‰§è¡Œ `Make Project` æˆ– `Rebuild Project` ç­‰å¤šç§æ–¹å¼éƒ½å¯ä»¥è§¦å‘æ³¨è§£å¤„ç†å™¨ï¼Œå¤„ç†å™¨å°†æ ¹æ®äº‹ä»¶å®šä¹‰è‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„äº‹ä»¶æ¥å£ã€‚ä¾‹å¦‚ï¼Œ`LoginEvents` å¯¹åº”çš„äº‹ä»¶ç±»ä¸ºï¼š

`EventDefineOfLoginEvents.java`

```kotlin
/**
 * Auto generate code, do not modify!!!
 * @see com.pengxr.sampleloginlib.events.LoginEvents 
 */
@SuppressWarnings("unchecked")
public class EventDefineOfLoginEvents implements IEventGroup {
    private EventDefineOfLoginEvents() {
    }

    public static IEvent<UserInfo> login() {
        return (IEvent<UserInfo>) (ModularEventBus.INSTANCE.createObservable("com.pengxr.sampleloginlib.events.LoginEvents$$login", UserInfo.class, false, true));
    }

    public static IEvent<Void> logout() {
        return (IEvent<Void>) (ModularEventBus.INSTANCE.createObservable("com.pengxr.sampleloginlib.events.LoginEvents$$logout", Void.class, true, false));
    }
}
```

- **5ã€è®¢é˜…äº‹ä»¶ï¼š** ä½¿ç”¨ `EventDefineOfLoginEvents` äº‹ä»¶ç±»æä¾›çš„é™æ€æ–¹æ³•è®¢é˜…äº‹ä»¶ï¼š

`è®¢é˜…è€…ç¤ºä¾‹`

```kotlin
// ä»¥ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥æ¨¡å¼è®¢é˜…äº‹ä»¶ï¼ˆä¸éœ€è¦æ‰‹åŠ¨æ³¨é”€è®¢é˜…ï¼‰
EventDefineOfLoginEvents.login().observe(this) { value: UserInfo? ->
    // Do something.
}

// ä»¥æ°¸ä¹…æ¨¡å¼è®¢é˜…äº‹ä»¶ï¼ˆéœ€è¦æ‰‹åŠ¨æ³¨é”€è®¢é˜…ï¼‰
EventDefineOfLoginEvents.logout().observeForever { _: Void? ->
    // Do something.
}
```

- **6ã€å‘å¸ƒäº‹ä»¶ï¼š** ä½¿ç”¨ `EventDefineOfLoginEvents` æä¾›çš„é™æ€æ–¹æ³•å‘å¸ƒäº‹ä»¶ï¼š

`å‘å¸ƒè€…ç¤ºä¾‹`

```kotlin
EventDefineOfLoginEvents.login().post(UserInfo("XIAOPENG"))

EventDefineOfLoginEvents.logout().post(null)
```

- **7ã€æ·»åŠ æ··æ·†è§„åˆ™ï¼ˆå¦‚æœä½¿ç”¨äº† minifyEnabled trueï¼‰ï¼š**

```
-dontwarn com.pengxr.modular.eventbus.generated.**
-keep class com.pengxr.modular.eventbus.generated.** { *; }
-keep @com.pengxr.modular.eventbus.facade.annotation.EventGroup class * {*;} # å¯é€‰
```

## è®¤è¯†äº‹ä»¶æ€»çº¿

### äº‹ä»¶æ€»çº¿çš„ä¼˜ç‚¹

äº‹ä»¶æ€»çº¿æ¡†æ¶æœ€å¤§çš„ä¼˜ç‚¹æ˜¯ â€è§£è€¦â€œï¼Œå³äº‹ä»¶å‘å¸ƒè€…ä¸äº‹ä»¶è®¢é˜…è€…çš„è§£è€¦ï¼Œäº‹ä»¶çš„å‘å¸ƒè€…ä¸éœ€è¦å…³å¿ƒæ˜¯å¦æœ‰äººè®¢é˜…è¯¥äº‹ä»¶ï¼Œä¹Ÿä¸éœ€è¦å…³å¿ƒæ˜¯è°è®¢é˜…è¯¥äº‹ä»¶ï¼Œä»£ç è€¦åˆåº¦è¾ƒä½ã€‚å› æ­¤ï¼Œäº‹ä»¶æ€»çº¿æ¡†æ¶æ›´é€‚åˆä½œä¸ºå…¨å±€çš„äº‹ä»¶é€šä¿¡æ–¹æ¡ˆï¼Œæˆ–è€…ç»„ä»¶é—´é€šä¿¡çš„è¾…åŠ©æ–¹æ¡ˆã€‚

### äº‹ä»¶æ€»çº¿çš„ç¼ºç‚¹

ç„¶è€Œï¼Œæˆä¹Ÿè§ä½•è´¥è§ä½•ã€‚æœ‰äººè§‰å¾—äº‹ä»¶æ€»çº¿å¥½ç”¨ï¼Œäº¦æœ‰äººè§‰å¾—äº‹ä»¶æ€»çº¿ä¸å¥½ç”¨ï¼Œå½’æ ¹ç»“åº•è¿˜æ˜¯å› ä¸ºäº‹ä»¶æ€»çº¿å¤ªå®¹æ˜“è¢«æ»¥ç”¨äº†ï¼Œç”¨æ—¶ä¸€æ—¶çˆ½ï¼Œç»´æŠ¤ç«è‘¬åœºã€‚æˆ‘å°†äº‹ä»¶æ€»çº¿æ¡†æ¶å­˜åœ¨çš„é—®é¢˜æ¦‚æ‹¬ä¸ºä»¥ä¸‹ 5 ç§å¸¸è§é—®é¢˜ï¼š

- **1ã€æ¶ˆæ¯éš¾æº¯æºï¼š** åœ¨é˜…è¯»æºç çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœéœ€è¦æŸ¥æ‰¾å‘å¸ƒäº‹ä»¶æˆ–è®¢é˜…äº‹ä»¶çš„åœ°æ–¹ï¼Œåªèƒ½é€šè¿‡æŸ¥æ‰¾äº‹ä»¶å¼•ç”¨çš„æ–¹å¼è¿›è¡Œæº¯æºï¼Œå¢å¤§äº†ç†è§£ä»£ç é€»è¾‘çš„éš¾åº¦ã€‚ç‰¹åˆ«æ˜¯å½“é¡¹ç›®ä¸­åˆ°å¤„æ˜¯ä¸´æ—¶äº‹ä»¶æ—¶ï¼Œéš¾åº¦ä¼šå¤§å¤§å¢åŠ ï¼›

- **2ã€ä¸´æ—¶äº‹ä»¶æ»¥ç”¨ï¼š** ç”±äºæ¡†æ¶å¯¹äº‹ä»¶å®šä¹‰æ²¡æœ‰å¼ºåˆ¶çº¦æŸï¼Œå¼€å‘è€…å¯ä»¥éšæ„åœ°åœ¨é¡¹ç›®çš„å„ä¸ªè§’è½å®šä¹‰äº‹ä»¶ã€‚å¯¼è‡´æ•´ä¸ªé¡¹ç›®éƒ½æ˜¯ä¸´æ—¶äº‹ä»¶é£æ¥é£å»ï¼Œå¢å¤§åæœŸç»´æŠ¤çš„éš¾åº¦ï¼›

- **3ã€æ•°æ®ç±»å‹è½¬æ¢é”™è¯¯ï¼š** LiveDataBus ç­‰äº‹ä»¶æ€»çº¿æ¡†æ¶éœ€è¦å¼€å‘è€…æ‰‹åŠ¨è¾“å…¥äº‹ä»¶æ•°æ®ç±»å‹ï¼Œå½“è®¢é˜…æ–¹ä¸å‘é€æ–¹ä½¿ç”¨ä¸åŒçš„æ•°æ®ç±»å‹æ—¶ï¼Œä¼šå‘ç”Ÿç±»å‹è½¬æ¢é”™è¯¯ã€‚åœ¨å‘ç”Ÿäº‹ä»¶å‘½åå†²çªæ—¶ï¼Œå‡ºé”™çš„æ¦‚ç‡ä¼šå¤§å¤§å¢åŠ ï¼Œå­˜åœ¨éšæ‚£ï¼›

- **4ã€äº‹ä»¶å‘½åé‡å¤ï¼š** ç”±äºæ¡†æ¶å¯¹äº‹ä»¶å‘½åæ²¡æœ‰å¼ºåˆ¶çº¦æŸï¼Œä¸åŒç»„ä»¶æœ‰å¯èƒ½å®šä¹‰é‡åçš„äº‹ä»¶ï¼Œäº§ç”Ÿé€»è¾‘é”™è¯¯ã€‚å¦‚æœé‡åçš„äº‹ä»¶è¿˜ä½¿ç”¨äº†ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œè¿˜ä¼šå‡ºç°ç±»å‹è½¬æ¢é”™è¯¯ï¼Œå­˜åœ¨éšæ‚£ï¼›

- **5ã€äº‹ä»¶å‘½åç–å¿½ï¼š** ä¸ â€äº‹ä»¶å‘½åé‡å¤â€œ ç±»ä¼¼ï¼Œç”±äºæ¡†æ¶å¯¹äº‹ä»¶å‘½åæ²¡æœ‰æ£€æŸ¥ï¼Œæœ‰å¯èƒ½å‡ºç°å¼€å‘è€…å¤åˆ¶ç²˜è´´åå¿˜è®°ä¿®æ”¹äº‹ä»¶å˜é‡å€¼çš„é—®é¢˜ï¼Œæˆ–è€…å˜é‡å€¼æ‹¼å†™é”™è¯¯ï¼ˆä¾‹å¦‚ `login_success` æ‹¼å†™ä¸º `login_succese`ï¼‰ï¼Œé‚£ä¹ˆè®¢é˜…æ–¹å°†æ°¸è¿œæ”¶ä¸åˆ°äº‹ä»¶ã€‚

### ModularEventBus çš„ä¼˜ç‚¹

ModularEventBus ç»„ä»¶åŒ–äº‹ä»¶æ€»çº¿æ¡†æ¶çš„ä¼˜ç‚¹ï¼š **åœ¨ä¿æŒå‘å¸ƒè€…ä¸è®¢é˜…è€…çš„è§£è€¦çš„ä¼˜åŠ¿ä¸‹ï¼Œè§£å†³ä¸Šè¿°äº‹ä»¶æ€»çº¿æ¡†æ¶ä¸­å­˜åœ¨çš„é€šç—…ã€‚** å…·ä½“é€šè¿‡ä»¥ä¸‹ 5 ä¸ªæ‰‹æ®µå®ç°ï¼š

- **1ã€äº‹ä»¶å£°æ˜èšåˆï¼š** å‘å¸ƒè€…å’Œè®¢é˜…è€…åªèƒ½ä½¿ç”¨é¢„å®šä¹‰çš„äº‹ä»¶ï¼Œä¸¥æ ¼ç¦æ­¢ä½¿ç”¨ä¸´æ—¶äº‹ä»¶ï¼Œäº‹ä»¶éœ€è¦æŒ‰ç…§çº¦å®šèšåˆå®šä¹‰åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼ˆè§£å†³ä¸´æ—¶äº‹ä»¶æ»¥ç”¨é—®é¢˜ï¼‰ï¼›

- **2ã€åŒºåˆ†ä¸åŒç»„ä»¶çš„åŒåäº‹ä»¶ï¼š** åœ¨å®šä¹‰äº‹ä»¶æ—¶éœ€è¦æŒ‡å®šäº‹ä»¶æ‰€å± `moduleName`ï¼Œæ¡†æ¶è‡ªåŠ¨ä½¿ç”¨ `"[moduleName]$$[eventName]"` ä½œä¸ºæœ€ç»ˆçš„äº‹ä»¶åï¼ˆè§£å†³äº‹ä»¶å‘½åé‡å¤é—®é¢˜ï¼‰ï¼›

- **3ã€äº‹ä»¶æ•°æ®ç±»å‹å£°æ˜ï¼š** åœ¨å®šä¹‰äº‹ä»¶æ—¶éœ€è¦æŒ‡å®šäº‹ä»¶çš„æ•°æ®ç±»å‹ï¼Œæ¡†æ¶è‡ªåŠ¨ä½¿ç”¨è¯¥æ•°æ®ç±»å‹å‘é€å’Œè®¢é˜…äº‹ä»¶ï¼ˆè§£å†³æ•°æ®ç±»å‹è½¬æ¢é”™è¯¯é—®é¢˜ï¼‰ï¼›

- **4ã€æ¥å£å¼ºçº¦æŸï¼š** è¿è¡Œæ—¶ä½¿ç”¨äº‹ä»¶ç±»å‘å¸ƒå’Œè®¢é˜…äº‹ä»¶ï¼Œæ¡†æ¶è‡ªåŠ¨ä½¿ç”¨äº‹ä»¶å®šä¹‰çš„äº‹ä»¶åå’Œæ•°æ®ç±»å‹ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨è¾“å…¥äº‹ä»¶åå’Œæ•°æ®ç±»å‹ï¼ˆè§£å†³äº‹ä»¶å‘½åå‘½åé”™è¯¯ï¼‰ï¼›

- **5ã€APT ç”Ÿæˆæ¥å£ç±»ï¼š** æ¡†æ¶åœ¨ç¼–è¯‘æ—¶ä½¿ç”¨ APT æ³¨è§£å¤„ç†å™¨è‡ªåŠ¨ç”Ÿæˆäº‹ä»¶æ¥å£ç±»ã€‚

### ä¸ç¾å›¢ modular-event å¯¹æ¯”æœ‰å“ªäº›ä»€ä¹ˆä¸åŒï¼Ÿ  

- **modular-event ä½¿ç”¨é™æ€å¸¸é‡å®šä¹‰äº‹ä»¶ï¼Œä¸ºä»€ä¹ˆ ModularEventBus ç”¨æ¥å£å®šä¹‰äº‹ä»¶ï¼Ÿ**
  
  ç¾å›¢ modular-event ä½¿ç”¨å¸¸é‡å¼•å…¥äº†é‡å¤ä¿¡æ¯ï¼Œå­˜åœ¨ä¸ä¸€è‡´é£é™©ã€‚ä¾‹å¦‚å¼€å‘è€…å¤åˆ¶ä¸€è¡Œå¸¸é‡åï¼Œåªä¿®æ”¹å¸¸é‡åä½†å¿˜è®°ä¿®æ”¹å€¼ï¼Œè¿™ç§é”™è¯¯å¾€å¾€å¾ˆéš¾è¢«å‘ç°ã€‚è€Œ ModularEventBus ä½¿ç”¨æ–¹æ³•åä½œä¸ºäº‹ä»¶åï¼Œæ–¹æ³•è¿”å›å€¼ä½œä¸ºäº‹ä»¶æ•°æ®ç±»å‹ï¼Œä¸ä¼šå¼•å…¥é‡å¤ä¿¡æ¯ä¸”æ›´åŠ ç®€æ´ã€‚

`modular-event äº‹ä»¶å®šä¹‰`

<img width="700" alt="image" src="https://user-images.githubusercontent.com/25008934/187362798-5bdea631-8fca-426a-967f-beeca38c7e9a.png">

- **modular-event ä½¿ç”¨åŠ¨æ€ä»£ç†ï¼Œä¸ºä»€ä¹ˆ ModularEventBus ä¸éœ€è¦ï¼Ÿ**
  
  ç¾å›¢ modular-event ä½¿ç”¨åŠ¨æ€ä»£ç† API ç»Ÿä¸€æ¥ç®¡äº†äº‹ä»¶çš„å‘å¸ƒå’Œè®¢é˜…ï¼Œä½†è€ƒè™‘åˆ°è¿™éƒ¨åˆ†ä»£ç†é€»è¾‘éå¸¸ç®€å•ï¼ˆè·å–äº‹ä»¶åå¹¶äº¤ç»™ LiveDataBus å®Œæˆåç»­çš„å‘å¸ƒå’Œè®¢é˜…é€»è¾‘ï¼‰ï¼Œä¸”æ¡†æ¶æœ¬èº«å·²ç»å¼•å…¥äº†ç¼–è¯‘æ—¶ APT æŠ€æœ¯ï¼Œå®Œå…¨å¯ä»¥åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆè¿™éƒ¨åˆ†ä»£ç†é€»è¾‘ï¼Œæ²¡å¿…è¦ä½¿ç”¨åŠ¨æ€ä»£ç† APIã€‚

- **æ›´å¤šç‰¹æ€§æ”¯æŒï¼š** 
  
  æ­¤å¤– ModularEventBus è¿˜æ”¯æŒç”Ÿæˆäº‹ä»¶æ–‡æ¡£ã€ç©ºæ•°æ®æ‹¦æˆªã€æ³›å‹äº‹ä»¶ã€è‡ªåŠ¨æ¸…é™¤ç©ºé—²äº‹ä»¶ç­‰ç‰¹æ€§ã€‚

## å®Œæ•´ä½¿ç”¨æ–‡æ¡£

### 1ã€å®šä¹‰äº‹ä»¶

- **ä½¿ç”¨æ³¨è§£å®šä¹‰äº‹ä»¶ï¼š** 

  - **`@EventGroup` æ³¨è§£ï¼š** `@EventGroup` æ³¨è§£ç”¨äºå®šä¹‰äº‹ä»¶ç»„ï¼Œä¿®é¥°äº interface æ¥å£ä¸Šï¼Œåœ¨è¯¥ç±»ä¸­å®šä¹‰çš„æ¯ä¸ªæ–¹æ³•å‡è§†ä¸ºä¸€ä¸ªäº‹ä»¶å®šä¹‰ï¼›
  
  - **`@Event` æ³¨è§£ï¼š** `@Event` æ³¨è§£ç”¨äºäº‹ä»¶ç»„ä¸­çš„äº‹ä»¶å®šä¹‰ï¼Œäº¦å¯çœç•¥ã€‚

æ¨¡æ¿ç¨‹åºå¦‚ä¸‹ï¼š

`com.pengxr.sample.events.MainEvents.kt`
```
// äº‹ä»¶ç»„
@EventGroup
interface MainEvents {

    // äº‹ä»¶
    // @Event å¯ä»¥çœç•¥
    @Event
    fun open(): String
}
```

> **æç¤ºï¼š** ä»¥ä¸Šå³å®šä¹‰äº†ä¸€ä¸ª `MainEvents` äº‹ä»¶ç»„ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª `com.pengxr.sample.events.MainEvents$$open` äº‹ä»¶ä¸”æ•°æ®ç±»å‹ä¸º `String` ç±»å‹ã€‚

äº¦å…¼å®¹å°† `@EventGroup` ä¿®é¥°äº class ç±»è€Œé interface æ¥å£ï¼Œä½†ä¼šæœ‰ç¼–è¯‘æ—¶è­¦å‘Šï¼š `Annotated @EventGroup on a class type [IllegalEvent], expected a interface. Is that really what you wantï¼Ÿ`

`é”™è¯¯ç¤ºä¾‹`

```
@EventGroup
class IllegalEvent {

    fun illegalEvent() {

    }
}
```

- **ä½¿ç”¨ `@Ignore` æ³¨è§£å¿½ç•¥å®šä¹‰ï¼š** ä½¿ç”¨ `@Ignore` æ³¨è§£å¯ä»¥æ’é™¤äº‹ä»¶ç±»æˆ–äº‹ä»¶æ–¹æ³•ï¼Œä½¿å…¶ä¸è¢«è§†ä¸ºäº‹ä»¶å®šä¹‰ã€‚

`ç¤ºä¾‹ç¨‹åº`

```
// å¯ä»¥ä¿®é¥°äºäº‹ä»¶ç»„
@Ignore
@EventGroup
interface IgnoreEvent {

    // äº¦å¯ä¿®é¥°äºäº‹ä»¶
    @Ignore
    fun ignoredMethod()

    fun method()
}
```

- **ä½¿ç”¨ `@Deprecated` æ³¨è§£æç¤ºè¿‡æ—¶ï¼š** ä½¿ç”¨ `@Deprecated` æ³¨è§£å¯ä»¥æ ‡è®°äº‹ä»¶ä¸ºè¿‡æ—¶ã€‚ä¸ `@Ignore` ä¸åŒæ˜¯ï¼Œ`@Deprecated` ä¿®é¥°çš„ç±»æˆ–æ–¹æ³•ä¾ç„¶æ˜¯æœ‰æ•ˆçš„äº‹ä»¶å®šä¹‰ã€‚

`ç¤ºä¾‹ç¨‹åº`

```
// è™½ç„¶è¿‡æ—¶ï¼Œä½†ä¾ç„¶æ˜¯æœ‰æ•ˆçš„äº‹ä»¶å®šä¹‰
@Deprecated("Don't use it.")
@EventGroup
interface DeprecatedEvent {

    @Deprecated("Don't use it.")
    fun deprecatedMethod()
}
```

- **å®šä¹‰äº‹ä»¶æ•°æ®ç±»å‹ï¼š** äº‹ä»¶æ–¹æ³•è¿”å›å€¼å³è¡¨ç¤ºäº‹ä»¶æ•°æ®ç±»å‹ï¼Œæ”¯æŒæ³›å‹ï¼ˆå¦‚ `List<String>`ï¼‰ï¼Œæ”¯æŒä¸æºå¸¦æ•°æ®çš„æ— æ•°æ®äº‹ä»¶ã€‚ä»¥ä¸‹å‡ä¸ºåˆæ³•å®šä¹‰ï¼š

`Java ç¤ºä¾‹ç¨‹åº`

```
// äº‹ä»¶æ•°æ®ç±»å‹ä¸º String
String stringEventInJava();

// äº‹ä»¶æ•°æ®ç±»å‹ä¸º List<String>
List<String> listEventInJava();

// ä»¥ä¸‹å‡è§†ä¸ºæ— æ•°æ®äº‹ä»¶
void voidEventInJava1();
Void voidEventInJava2();
```

`Kotlin ç¤ºä¾‹ç¨‹åº`
```
// äº‹ä»¶æ•°æ®ç±»å‹ä¸º String
fun stringEventInKotlin(): String

// äº‹ä»¶æ•°æ®ç±»å‹ä¸º List<String>
fun listEventInKotlin(): List<String>

// ä»¥ä¸‹å‡è§†ä¸ºæ— æ•°æ®äº‹ä»¶
fun voidEventInKotlin1()
fun voidEventInKotlin2(): Unit
fun voidEventInKotlin3(): Unit?
```

- **å®šä¹‰äº‹ä»¶æ•°æ®å¯ç©ºæ€§ï¼š** ä½¿ç”¨ `@Nullable` æˆ– `@NonNull` æ³¨è§£è¡¨ç¤ºäº‹ä»¶æ•°æ®å¯ç©ºæ€§ï¼Œé»˜è®¤ä¸ºå¯ç©ºç±»å‹ã€‚ä»¥ä¸‹å‡ä¸ºåˆæ³•å®šä¹‰ï¼š

`Java ç¤ºä¾‹ç¨‹åº`

```
@NonNull
String nonNullEventInJava();

@Nullable
String nullableEventInJava();

// é»˜è®¤è§†ä¸º @Nullable
String eventInJava();
```

`Kotlin ç¤ºä¾‹ç¨‹åº`

```
fun nonNullEventInKotlin(): String

// æç¤ºï¼šKotlin ç¼–è¯‘å™¨å°†è¿”å›ç±»å‹ä¸Šçš„ ? å·è§†ä¸º @org.jetbrains.annotations.Nullable
fun nullableEventInKotlin(): String?
```

ä»¥ä¸‹ä¸ºæ”¯æŒçš„å¯ç©ºæ€§æ³¨è§£ï¼š

```
org.jetbrains.annotations.Nullable
android.annotation.Nullable
androidx.annotation.Nullable

org.jetbrains.annotations.NotNull
android.annotation.NonNull
androidx.annotation.NonNull
```

- **å®šä¹‰è‡ªåŠ¨æ¸…é™¤äº‹ä»¶ï¼š** æ”¯æŒé…ç½®åœ¨äº‹ä»¶æ²¡æœ‰å…³è”çš„è®¢é˜…è€…æ—¶è‡ªåŠ¨è¢«æ¸…é™¤ï¼ˆä»¥é‡Šæ”¾å†…å­˜ï¼‰ï¼Œé»˜è®¤å€¼ä¸º falseã€‚å¯ä»¥ä½¿ç”¨ `@EventGroup` æ³¨è§£æˆ– `@Event` æ³¨è§£è¿›è¡Œä¿®æ”¹ï¼Œä»¥ `@Event` çš„å–å€¼ä¼˜å…ˆã€‚

`ç¤ºä¾‹ç¨‹åº`

```
@EventGroup(autoClear = true)
interface MainEvents {

    @Event(autoClear = false)
    fun normalEvent(): String
    
    // ç»§æ‰¿ @EventGroup ä¸­çš„ autoClear å–å€¼
    fun autoClearEvent(): String
}
```

- **å®šä¹‰äº‹ä»¶æ‰€å±ç»„ä»¶åï¼š** ä¸ºé¿å…ä¸åŒç»„ä»¶ä¸­çš„äº‹ä»¶åé‡å¤ï¼Œæ¡†æ¶è‡ªåŠ¨ä½¿ç”¨ `"[moduleName]$$[eventName]"` ä½œä¸ºæœ€ç»ˆçš„äº‹ä»¶åã€‚é»˜è®¤ä½¿ç”¨äº‹ä»¶ç»„çš„ `[å…¨é™å®šç±»å]` ä½œä¸º `moduleName`ï¼Œå¯ä»¥ä½¿ç”¨ `@EventGroup` æ³¨è§£è¿›è¡Œä¿®æ”¹ã€‚

`ç¤ºä¾‹ç¨‹åº`

`com.pengxr.sample.events.MainEvents.kt`
```
@EventGroup(moduleName = "main")
interface MainEvents {

    fun open(): String
}
```

> **æç¤ºï¼š** ä»¥ä¸Šå³å®šä¹‰äº†ä¸€ä¸ª `MainEvents` äº‹ä»¶ç»„ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª `main$$open` äº‹ä»¶ä¸”æ•°æ®ç±»å‹ä¸º `String` ç±»å‹ã€‚

### 2ã€æ‰§è¡Œæ³¨è§£å¤„ç†å™¨

åœ¨å®Œæˆäº‹ä»¶å®šä¹‰åï¼Œæ‰§è¡Œ `Make Project` æˆ– `Rebuild Project` ç­‰å¤šç§æ–¹å¼éƒ½å¯ä»¥è§¦å‘æ³¨è§£å¤„ç†å™¨ï¼Œå¤„ç†å™¨å°†æ ¹æ®äº‹ä»¶å®šä¹‰è‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„äº‹ä»¶æ¥å£ã€‚ä¾‹å¦‚ï¼Œ `MainEvents` å¯¹åº”çš„äº‹ä»¶æ¥å£ä¸ºï¼š

`com.pengxr.modular.eventbus.generated.events.com.pengxr.sample.events.EventDefineOfMainEvents.java`
```
/**
 * Auto generate code, do not modify!!!
 * @see com.pengxr.sample.events.MainEvents 
 */
@SuppressWarnings("unchecked")
public class EventDefineOfMainEvents implements IEventGroup {
    private EventDefineOfMainEvents() {
    }

    public static IEvent<String> open() {
        return (IEvent<String>) (ModularEventBus.INSTANCE.createObservable("main$$open", String.class, false, false));
    }
}
```

`EventDefineOfMainEvents` ä¸­çš„é™æ€æ–¹æ³•ä¸ `MainEvent` äº‹ä»¶ç»„ä¸­çš„æ¯ä¸ªäº‹ä»¶ä¸€ä¸€å¯¹åº”ï¼Œç›´æ¥é€šè¿‡é™æ€æ–¹æ³•å³å¯è·å–äº‹ä»¶å®ä¾‹ï¼Œè€Œä¸å†é€šè¿‡æ‰‹åŠ¨è¾“å…¥äº‹ä»¶åå­—ç¬¦ä¸²æˆ–äº‹ä»¶æ•°æ®ç±»å‹ï¼Œæ•…å¯é¿å…äº‹ä»¶åé”™è¯¯æˆ–æ•°æ®ç±»å‹é”™è¯¯ç­‰é—®é¢˜ã€‚

æ‰€æœ‰çš„äº‹ä»¶å®ä¾‹å‡æ˜¯ `IEvent` æ³›å‹æ¥å£çš„å®ç°ç±»ï¼Œä¾‹å¦‚ `open` äº‹ä»¶å±äº `IEvent<String>` ç±»å‹çš„äº‹ä»¶å®ä¾‹ã€‚å‘å¸ƒäº‹ä»¶å’Œè®¢é˜…äº‹ä»¶éœ€è¦ç”¨åˆ° `IEvent` æ¥å£ä¸­å®šä¹‰çš„ä¸€ç³»åˆ— post æ–¹æ³•å’Œ observe æ–¹æ³•ï¼Œ`IEvent` æ¥å£çš„å®Œæ•´å®šä¹‰å¦‚ä¸‹ï¼š

`IEvent.kt`
```
interface IEvent<T> {

    /**
     * å‘å¸ƒäº‹ä»¶ï¼Œå…è®¸åœ¨å­çº¿ç¨‹å‘å¸ƒ
     */
    @AnyThread
    fun post(value: T?)

    /**
     * å»¶è¿Ÿå‘å¸ƒäº‹ä»¶ï¼Œå…è®¸åœ¨å­çº¿ç¨‹å‘å¸ƒ
     */
    @AnyThread
    fun postDelay(value: T?, delay: Long)

    /**
     * å»¶è¿Ÿå‘å¸ƒäº‹ä»¶ï¼Œåœ¨å‡†å¤‡å‘å¸ƒå‰ä¼šæ£€æŸ¥ producer å¤„äºæ´»è·ƒçŠ¶æ€ï¼Œå…è®¸åœ¨å­çº¿ç¨‹å‘å¸ƒ
     *
     * @param producer å‘å¸ƒè€…çš„ LifecycleOwner
     */
    @AnyThread
    fun postDelay(value: T?, delay: Long, producer: LifecycleOwner)

    /**
     * å‘å¸ƒäº‹ä»¶ï¼Œå…è®¸åœ¨å­çº¿ç¨‹å‘å¸ƒï¼Œç¡®ä¿è®¢é˜…è€…æŒ‰ç…§å‘å¸ƒé¡ºåºæ¥æ”¶äº‹ä»¶
     */
    @AnyThread
    fun postOrderly(value: T?)

    /**
     * ä»¥ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥æ¨¡å¼è®¢é˜…äº‹ä»¶ï¼ˆä¸éœ€è¦æ‰‹åŠ¨æ³¨é”€è®¢é˜…ï¼‰
     */
    @AnyThread
    fun observe(consumer: LifecycleOwner, observer: Observer<T?>)

    /**
     * ä»¥ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥æ¨¡å¼ç²˜æ€§è®¢é˜…äº‹ä»¶ï¼ˆä¸éœ€è¦æ‰‹åŠ¨æ³¨é”€è®¢é˜…ï¼‰
     */
    @AnyThread
    fun observeSticky(consumer: LifecycleOwner, observer: Observer<T?>)
    
    /**
     * ä»¥æ°¸ä¹…æ¨¡å¼è®¢é˜…äº‹ä»¶ï¼ˆéœ€è¦æ‰‹åŠ¨æ³¨é”€è®¢é˜…ï¼‰
     */
    fun observeForever(observer: Observer<T?>)

    /**
     * ä»¥æ°¸ä¹…æ¨¡å¼ç²˜æ€§è®¢é˜…äº‹ä»¶ï¼ˆéœ€è¦æ‰‹åŠ¨æ³¨é”€è®¢é˜…ï¼‰
     *
     * @param observer Event observer.
     */
    @AnyThread
    fun observeStickyForever(observer: Observer<T?>)

    /**
     * æ³¨é”€è®¢é˜…è€…
     */
    @AnyThread
    fun removeObserver(observer: Observer<T?>)

    /**
     * ç§»é™¤äº‹ä»¶ï¼Œå…³è”çš„è®¢é˜…è€…å…³ç³»ä¹Ÿä¼šè¢«è§£é™¤
     */
    @AnyThread
    fun removeEvent()
}
```

### 3ã€è®¢é˜…äº‹ä»¶

ä½¿ç”¨ `IEvent` æ¥å£å®šä¹‰çš„ä¸€ç³»åˆ— `observe()` æ¥å£è®¢é˜…äº‹ä»¶ï¼Œä½¿ç”¨ç¤ºä¾‹ï¼š

`ç¤ºä¾‹ç¨‹åº`
```
// ä»¥ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥æ¨¡å¼è®¢é˜…ï¼ˆä¸éœ€è¦æ‰‹åŠ¨æ³¨é”€è®¢é˜…ï¼‰
EventDefineOfMainEvents.open().observe(this) {
    // do something.
}

// ä»¥ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥æ¨¡å¼ã€ä¸”ç²˜æ€§æ¨¡å¼è®¢é˜…ï¼ˆä¸éœ€è¦æ‰‹åŠ¨æ³¨é”€è®¢é˜…ï¼‰
EventDefineOfMainEvents.open().observeSticky(this) {
    // do something.
}

val foreverObserver = Observer<String?> {
    // do something.
}

// ä»¥æ°¸ä¹…æ¨¡å¼è®¢é˜…ï¼ˆéœ€è¦æ‰‹åŠ¨æ³¨é”€è®¢é˜…ï¼‰
EventDefineOfMainEvents.open().observeForever(foreverObserver)

// ä»¥æ°¸ä¹…æ¨¡å¼ï¼Œä¸”ç²˜æ€§æ¨¡å¼è®¢é˜…ï¼ˆéœ€è¦æ‰‹åŠ¨æ³¨é”€è®¢é˜…ï¼‰
EventDefineOfMainEvents.open().observeStickyForever(foreverObserver)

// ç§»é™¤è§‚å¯Ÿè€…
EventDefineOfMainEvents.open().removeObserver(foreverObserver)
```

### 4ã€å‘å¸ƒäº‹ä»¶

ä½¿ç”¨ `IEvent` æ¥å£å®šä¹‰çš„ä¸€ç³»åˆ— `post()` æ¥å£å‘å¸ƒäº‹ä»¶ï¼Œä½¿ç”¨ç¤ºä¾‹ï¼š
  
`ç¤ºä¾‹ç¨‹åº`
```
// å‘å¸ƒäº‹ä»¶ï¼Œå…è®¸åœ¨å­çº¿ç¨‹å‘å¸ƒ
EventDefineOfMainEvents.open().post("XIAO PENG")

// å»¶è¿Ÿå‘å¸ƒäº‹ä»¶ï¼Œå…è®¸åœ¨å­çº¿ç¨‹å‘å¸ƒ
EventDefineOfMainEvents.open().postDelay("XIAO PENG", 5000)

// å»¶è¿Ÿå‘å¸ƒäº‹ä»¶ï¼Œåœ¨å‡†å¤‡å‘å¸ƒå‰ä¼šæ£€æŸ¥ producer å¤„äºæ´»è·ƒçŠ¶æ€ï¼Œå…è®¸åœ¨å­çº¿ç¨‹å‘å¸ƒã€‚
EventDefineOfMainEvents.open().postDelay("XIAO PENG", 5000, this)

// å‘å¸ƒäº‹ä»¶ï¼Œå…è®¸åœ¨å­çº¿ç¨‹å‘å¸ƒï¼Œç¡®ä¿è®¢é˜…è€…æŒ‰ç…§å‘å¸ƒé¡ºåºæ¥æ”¶äº‹ä»¶
EventDefineOfMainEvents.open().postOrderly("XIAO PENG")
  
// ç§»é™¤äº‹ä»¶
EventDefineOfMainEvents.open().removeEvent()
```
  
### 5ã€æ›´å¤šåŠŸèƒ½

- **ç”Ÿæˆäº‹ä»¶æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰ï¼š** æ”¯æŒç”Ÿæˆäº‹ä»¶æ–‡æ¡£ï¼Œéœ€è¦åœ¨ Gradle é…ç½®ä¸­å¼€å¯ï¼š

`æ¨¡å—çº§ build.gradle`

```
// éœ€è¦ç”Ÿæˆäº‹ä»¶æ–‡æ¡£çš„æ¨¡å—å°±å¢åŠ é…ç½®ï¼š
android {
    defaultConfig {
        javaCompileOptions {
            annotationProcessorOptions {
                arguments = [
                        MODULAR_EVENTBUS_GENERATE_DOC: "enable",
                        MODULAR_EVENTBUS_MODULE_NAME : project.getName()
                ]
            }
        }
    }
}
```

æ–‡æ¡£ç”Ÿæˆè·¯å¾„ï¼š `build/generated/source/kapt/[buildType]/com/pengxr/modular/eventbus/generated/docs/eventgroup-of-[MODULAR_EVENTBUS_MODULE_NAME].json`

- **é…ç½®ï¼ˆå¯é€‰ï¼‰ï¼š**
  - **debug(Boolean)ï¼š** è°ƒè¯•æ¨¡å¼å¼€å…³ï¼›
  - **throwNullEventException(Boolean)ï¼š** éç©ºäº‹ä»¶å‘å¸ƒç©ºæ•°æ®æ—¶æ˜¯å¦æŠ›å‡º `NullEventException` å¼‚å¸¸ï¼Œåœ¨ `release` æ¨¡å¼é»˜è®¤ä¸ºåªæ‹¦æˆªä¸æŠ›å‡ºå¼‚å¸¸ï¼Œåœ¨ `debug` æ¨¡å¼é»˜è®¤ä¸ºæ‹¦æˆªä¸”æŠ›å‡ºå¼‚å¸¸ï¼›
  - **setEventListener(IEventListener)ï¼š** å…¨å±€ç›‘å¬æ¥å£ã€‚
  
`ç¤ºä¾‹ç¨‹åº`
  
```
ModularEventBus.debug(true)
    .throwNullEventException(true)
    .setEventListener(object : IEventListener {
        override fun <T> onEventPost(eventName: String, event: BaseEvent<T>, data: T?) {
            Log.i(TAG, "onEventPost: $eventName, event = $event, data = $data")
        }
    })
```

## ç‰ˆæœ¬è¯´æ˜

| ç‰ˆæœ¬ | åŠŸèƒ½ |
| --- | --- |
| 1.0.x | åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å« annotationã€apiã€compiler ä¸‰ä¸ªæ ¸å¿ƒåŠŸèƒ½æ¨¡å— |

## ä¸»è¦åŠŸèƒ½å˜æ›´è®°å½•

- å‘å¸ƒ v1.0.5ï¼ˆAug 30, 2022ï¼‰
- ä½¿ç”¨äº‹ä»¶å®šä¹‰ç±»çš„ `[å…¨é™å®šç±»å]` ä»£æ›¿ `[åŒ…å]` ä½œä¸ºäº‹ä»¶çš„ç»„ä»¶åï¼Œé¿å…ç»„ä»¶å†…äº‹ä»¶å†²çªï¼ˆAug 30, 2022ï¼‰
- å‘å¸ƒ v1.0.4 åˆå§‹åŒ–ç‰ˆæœ¬ï¼ˆAug 29, 2022ï¼‰
- ä¼˜åŒ–æ¼”ç¤ºç¨‹åºï¼ˆAug 29, 2022ï¼‰
- å¤„ç† `@Deprecated` æ³¨è§£ï¼ˆAug 28, 2022ï¼‰
- å®Œæˆ MavenCentral å‘å¸ƒè„šæœ¬ï¼ˆAug 24, 2022ï¼‰
- å®Œæˆè‡ªåŠ¨æ¸…ç†ç©ºé—²äº‹ä»¶åŠŸèƒ½ï¼ˆAug 17, 2022ï¼‰
- å®Œæˆè‡ªåŠ¨ç”Ÿæˆäº‹ä»¶æ–‡æ¡£åŠŸèƒ½ï¼ˆAug 17, 2022ï¼‰
- æ–°å¢ `@Ignore` æ³¨è§£ï¼ˆAug 17, 2022ï¼‰
- å®Œæˆæ¼”ç¤ºç¨‹åºï¼ˆAug 16, 2022ï¼‰
- å®Œæˆä»£ç æ³¨é‡Šä¸æ€§èƒ½ä¼˜åŒ–ï¼ˆAug 15, 2022ï¼‰
- å®Œæˆä¸»ä½“åŠŸèƒ½ï¼ˆAug 14, 2022ï¼‰

## æœªæ¥åŠŸèƒ½è§„åˆ’

- æ”¯æŒè·¨è¿›ç¨‹ / è·¨ Appï¼šLiveEventBus æ¡†æ¶æ”¯æŒè·¨è¿›ç¨‹ / è·¨ Appï¼Œæœªæ¥æ ¹æ®ä½¿ç”¨åé¦ˆè€ƒè™‘å®ç°è¯¥ Featureï¼›
- æ”¯æŒæ›¿æ¢å†…éƒ¨ EventBus å·¥å‚ï¼šModularEventBus å·²é¢„è®¾è®¡äº‹ä»¶æ€»çº¿å·¥å‚ `IEventFactory`ï¼Œæœªæ¥æ ¹æ®ä½¿ç”¨åé¦ˆè€ƒè™‘å…¬å¼€è¯¥ APIï¼›
- æ”¯æŒåŸºäº Kotlin Flow çš„ IEventFactory å·¥å‚ï¼›
- ç¼–è¯‘æ—¶æ£€æŸ¥åœ¨ä¸åŒ `@EventGroup` ä¸­è®¾ç½®ç›¸åŒ modulaName ä¸”ç›¸åŒ `eventName`ï¼Œä½†äº‹ä»¶æ•°æ®ç±»å‹ä¸åŒçš„å¼‚å¸¸ã€‚

## å‚è€ƒèµ„æ–™

- [Android æ¶ˆæ¯æ€»çº¿çš„æ¼”è¿›ä¹‹è·¯ï¼šç”¨ LiveDataBus æ›¿ä»£ RxBusã€EventBus](https://tech.meituan.com/2018/07/26/android-livedatabus.html) â€”â€” æµ·äº®ï¼ˆç¾å›¢ï¼‰è‘—
- [Android ç»„ä»¶åŒ–æ–¹æ¡ˆåŠç»„ä»¶æ¶ˆæ¯æ€»çº¿ modular-event å®æˆ˜](https://tech.meituan.com/2018/12/20/modular-event.html) â€”â€” æµ·äº®ï¼ˆç¾å›¢ï¼‰è‘—

## å…±åŒæˆé•¿

- æ¬¢è¿æ Issue å¸®åŠ©ä¿®å¤ç¼ºé™·ï¼›
- æ¬¢è¿æ Pull Request å¢åŠ æ–°çš„ Featureï¼Œè®© ModularEventBus å˜å¾—æ›´åŠ å¼ºå¤§ï¼Œä½ çš„ ID ä¼šå‡ºç°åœ¨ Contributors ä¸­ï¼›
- æ¬¢è¿åŠ  [ä½œè€…å¾®ä¿¡](https://github.com/pengxurui/AndroidFamily/blob/master/images/%E4%B8%AA%E4%BA%BA%E5%BE%AE%E4%BF%A1.jpeg) ä¸ä½œè€…äº¤æµï¼Œæ¬¢è¿åŠ å…¥äº¤æµç¾¤æ‰¾åˆ°å¿—åŒé“åˆçš„ä¼™ä¼´

## å°å½­çš„å…¶å®ƒå¼€æºé¡¹ç›®

- [AndroidFamily](https://github.com/pengxurui/AndroidFamily) ã€Android é¢ç» + Android å­¦ä¹ æŒ‡å—ã€‘ä¸€ä»½é¢å‘ Android å¼€å‘è€…çš„æˆé•¿å’Œè¿›é˜¶çš„å­¦ä¹ è·¯çº¿ï¼›ğŸ”¥
- [AndroidPlatforms](https://github.com/pengxurui/AndroidPlatforms) æ¯ä¸ª Android å¼€å‘éƒ½è¦æ”¶è—çš„ç³»ç»Ÿé€‚é…æ‰‹å†Œï¼Œå¸¦ä½ å…¨é¢ä½“ç³»åŒ–åœ°è§£è¯» Android ç³»ç»Ÿæ›´æ–°ï¼›ğŸ”¥
- [EasyTrack](https://github.com/pengxurui/EasyTrack) åŸºäºè¥¿ç“œè§†é¢‘å‰ç«¯è§†å›¾æ ‘åŸ‹ç‚¹æ–¹æ¡ˆå®ç°çš„åŸ‹ç‚¹æ–¹æ¡ˆï¼›
- [EasyPrivacy](https://github.com/pengxurui/EasyPrivacy) ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…å¿«é€Ÿè§£å†³æ•´æ”¹é—®é¢˜çš„å·¥å…·ï¼›
- [LeetCode-Kotlin](https://github.com/pengxurui/LeetCode-Kotlin) LeetCode é«˜é¢‘é¢˜è§£ - Kotlin ç‰ˆæœ¬ã€‚

æ›´å¤šå†…å®¹ï¼Œè¯· [ç‚¹å‡»](https://juejin.cn/user/1063982987230392)

## Donate

å¦‚æœæœ¬ä»“åº“å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¯ä»¥è¯·å°å½­å–æ¯é€Ÿæº¶å’–å•¡ã€‚

![](https://github.com/pengxurui/AndroidFamily/blob/master/images/%E8%AF%B7%E5%B0%8F%E5%BD%AD%E5%96%9D%E6%9D%AF%E9%80%9F%E6%BA%B6%E5%92%96%E5%95%A1.png)

## License

Copyright [2022] [Peng Xurui]

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

[http://www.apache.org/licenses/LICENSE-2.0](http://www.apache.org/licenses/LICENSE-2.0)

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
